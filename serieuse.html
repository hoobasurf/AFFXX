<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Relation S√©rieuse</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: url('fond-classique.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
      overflow-x: hidden;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    a.test-btn {
      position: fixed;
      top: 20px;
      left: 20px;
      background: rgba(255, 105, 180, 0.85);
      color: white;
      padding: 10px 16px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      z-index: 9999;
      user-select: none;
    }

    #profilContainer {
      margin-top: 80px;
      width: 100%;
      max-width: 400px;
      display: flex;
      flex-direction: column;
      gap: 25px;
      padding-bottom: 50px;
    }

    .card {
      background: rgba(0, 0, 0, 0.6);
      border-radius: 12px;
      padding: 20px;
      text-align: center;
      box-shadow: 0 0 10px #ff69b4aa;
      user-select: none;
      position: relative;
    }

    .card img {
      width: 100%;
      max-width: 300px;
      border-radius: 12px;
      margin-bottom: 15px;
      object-fit: cover;
      height: 220px;
    }

    .card h2 {
      margin: 0 0 10px 0;
      font-size: 1.6em;
      color: #ffb6c1;
    }

    .card p {
      font-size: 1em;
      color: #ddd;
      min-height: 50px;
    }

    .buttons {
      margin-top: 15px;
      display: flex;
      justify-content: center;
      gap: 25px;
    }

    .buttons button {
      background: white;
      color: black;
      border: none;
      padding: 12px 18px;
      border-radius: 30px;
      font-size: 18px;
      cursor: pointer;
      transition: background-color 0.3s ease;
      user-select: none;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .buttons button:hover {
      background-color: #ff69b4;
      color: white;
    }

    .buttons button.view-profile {
      background: #ff69b4;
      color: white;
      width: auto;
      padding: 12px 20px;
      border-radius: 20px;
      font-weight: bold;
      font-size: 16px;
      flex-shrink: 0;
    }

    .buttons button.view-profile:hover {
      background: #e85aa0;
    }
  </style>
</head>
<body>
  <a href="questionnaire.html" class="test-btn" aria-label="Retour au questionnaire">‚ú® D√©couvrir le profil id√©al</a>

  <div id="profilContainer"></div>

  <script>
    const profils = [
      {
        nom: "Alex",
        age: 28,
        animal: "Chien",
        lieu: "Plage",
        soiree: "Chez soi en amoureux",
        amour: "Fusionnel(le)",
        image: "photo-profil1.jpg",
        description: "Aime les couchers de soleil et les romans."
      },
      {
        nom: "L√©a",
        age: 26,
        animal: "Chat",
        lieu: "Montagne",
        soiree: "Avec des amis",
        amour: "Ind√©pendant(e)",
        image: "photo-profil2.jpg",
        description: "Passionn√©e de randonn√©es et de libert√©."
      }
    ];

    const filters = JSON.parse(localStorage.getItem("questionnaireProfil"));

    function isCompatible(profil, filters) {
      if (!filters) return true; // Aucun filtre ‚Üí afficher tous les profils
      let score = 0;
      Object.keys(filters).forEach(key => {
        if (profil[key] && profil[key] === filters[key]) {
          score++;
        }
      });
      return score >= 3; // au moins 3 points communs
    }

    const container = document.getElementById("profilContainer");

    function openProfil(nom, age, image, description) {
      const win = window.open("", "_blank", "width=400,height=600");
      win.document.write(`
        <html lang="fr">
        <head>
          <title>${nom}</title>
          <style>
            body {
              margin: 0; padding: 30px;
              font-family: Arial, sans-serif;
              background: url('fond-paradis-romantique.jpg') center/cover no-repeat fixed;
              color: white;
              text-align: center;
            }
            .btn {
              position: fixed;
              top: 20px; left: 20px;
              background: #fff;
              color: #000;
              padding: 10px 16px;
              border-radius: 5px;
              text-decoration: none;
              font-weight: bold;
            }
            img {
              width: 150px;
              border-radius: 50%;
              border: 3px solid white;
              margin-bottom: 25px;
            }
            h2 {
              margin-bottom: 15px;
            }
            p {
              max-width: 400px;
              margin: auto;
              font-size: 1.1em;
              line-height: 1.4;
            }
          </style>
        </head>
        <body>
          <a href="serieuse.html" class="btn" onclick="window.close(); return false;">üîô Retour</a>
          <img src="${image}" alt="Photo de ${nom}">
          <h2>${nom}, ${age} ans</h2>
          <p>${description}</p>
        </body>
        </html>
      `);
    }

    // Afficher les profils filtr√©s
    profils.forEach(p => {
      if (isCompatible(p, filters)) {
        const card = document.createElement('div');
        card.className = 'card';

        card.innerHTML = `
          <img src="${p.image}" alt="Photo de ${p.nom}">
          <h2>${p.nom}, ${p.age} ans</h2>
          <p>${p.description}</p>
          <div class="buttons">
            <button class="btn-reject" aria-label="Rejeter ${p.nom}">‚ùå</button>
            <button class="btn-like" aria-label="Aimer ${p.nom}">‚ù§Ô∏è</button>
            <button class="view-profile" aria-label="Voir profil de ${p.nom}">Voir profil</button>
          </div>
        `;

        // Gestion clics boutons
        const btnReject = card.querySelector('.btn-reject');
        btnReject.addEventListener('click', e => {
          e.stopPropagation();
          card.remove();
        });

        const btnLike = card.querySelector('.btn-like');
        btnLike.addEventListener('click', e => {
          e.stopPropagation();
          alert(`Vous avez aim√© ${p.nom} !`);
          // ici tu peux ajouter une action like (ex: sauvegarder)
        });

        const btnView = card.querySelector('.view-profile');
        btnView.addEventListener('click', e => {
          e.stopPropagation();
          openProfil(p.nom, p.age, p.image, p.description);
        });

        container.appendChild(card);
      }
    });
  </script>
</body>
</html>
