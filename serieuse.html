<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Relation S√©rieuse</title>
  <style>
    body {
      margin: 0;
      font-family: 'Arial', sans-serif;
      background: url('fond-classique.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
      overflow-x: hidden;
    }

    .test-btn {
      position: absolute;
      top: 20px;
      left: 20px;
      background: rgba(255, 105, 180, 0.85);
      color: white;
      padding: 10px 16px;
      border-radius: 8px;
      text-decoration: none;
      font-weight: bold;
      z-index: 9999;
    }

    .card {
      width: 90%;
      max-width: 350px;
      margin: 100px auto;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      padding: 20px;
      text-align: center;
    }

    .card img {
      width: 100%;
      border-radius: 10px;
    }

    .buttons {
      margin-top: 15px;
      display: flex;
      justify-content: space-around;
    }

    .buttons button {
      background: white;
      color: black;
      border: none;
      padding: 10px;
      border-radius: 50%;
      font-size: 20px;
    }
  </style>
</head>
<body>
  <a href="questionnaire.html" class="test-btn">‚ú® D√©couvrir le profil id√©al</a>

  <div id="profilContainer"></div>

  <script>
    const profils = [
      {
        nom: "Alex",
        age: 28,
        animal: "Chien",
        lieu: "Plage",
        soiree: "Chez soi en amoureux",
        amour: "Fusionnel(le)",
        image: "photo-profil1.jpg",
        description: "Aime les couchers de soleil et les romans."
      },
      {
        nom: "L√©a",
        age: 26,
        animal: "Chat",
        lieu: "Montagne",
        soiree: "Avec des amis",
        amour: "Ind√©pendant(e)",
        image: "photo-profil2.jpg",
        description: "Passionn√©e de randonn√©es et de libert√©."
      }
    ];

    const filters = JSON.parse(localStorage.getItem("questionnaireProfil"));

    function isCompatible(profil, filters) {
      if (!filters) return true; // Aucun filtre ‚Üí afficher tous les profils
      let score = 0;
      Object.keys(filters).forEach(key => {
        if (profil[key] && profil[key] === filters[key]) {
          score++;
        }
      });
      return score >= 3; // au moins 3 points communs
    }

    const container = document.getElementById("profilContainer");
    profils.forEach(p => {
      if (isCompatible(p, filters)) {
        container.innerHTML += `
          <div class="card" onclick="openProfil('${p.nom}', '${p.age}', '${p.image}', '${p.description}')">
            <img src="${p.image}" alt="${p.nom}">
            <h2>${p.nom}, ${p.age} ans</h2>
            <p>${p.description}</p>
            <div class="buttons">
              <button>‚ùå</button>
              <button>‚ù§Ô∏è</button>
            </div>
          </div>`;
      }
    });

    function openProfil(nom, age, image, description) {
      const win = window.open("", "_blank");
      win.document.write(`
        <html>
        <head>
          <title>${nom}</title>
          <style>
            body {
              margin: 0;
              font-family: Arial;
              background: url('fond-paradis-romantique.jpg') center/cover no-repeat fixed;
              color: white;
              text-align: center;
              padding: 40px;
            }
            .btn {
              position: absolute;
              top: 20px;
              left: 20px;
              background: #fff;
              color: #000;
              padding: 10px 16px;
              border-radius: 5px;
              text-decoration: none;
            }
          </style>
        </head>
        <body>
          <a href="serieuse.html" class="btn">üîô Retour</a>
          <img src="${image}" style="width:150px; border-radius:50%; border:3px solid white;"><br><br>
          <h2>${nom}, ${age} ans</h2>
          <p style="max-width:400px; margin:auto">${description}</p>
        </body>
        </html>
      `);
    }
  </script>
</body>
</html>
