<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>DÃ©couvrir mon profil idÃ©al - AFFINIX</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" />
  <style>
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: url('img/fond-paradis-romantique.jpg') no-repeat center center fixed;
      background-size: cover;
      color: white;
    }
    .container {
      max-width: 900px;
      margin: auto;
      padding: 40px 20px;
      background: rgba(0,0,0,0.4);
      border-radius: 15px;
    }
    h1, h2 {
      text-align: center;
      margin-bottom: 30px;
    }
    label {
      display: block;
      margin-bottom: 15px;
      font-size: 1.1em;
    }
    .question {
      margin-bottom: 30px;
    }
    input[type="radio"] {
      margin-right: 10px;
    }
    button {
      display: block;
      margin: 40px auto 20px;
      padding: 15px 30px;
      font-size: 1.1em;
      border: none;
      border-radius: 10px;
      background-color: #ff7bb2;
      color: white;
      cursor: pointer;
    }
    #resultats {
      margin-top: 40px;
    }
    .profil-card {
      background: rgba(255,255,255,0.1);
      border-radius: 10px;
      padding: 15px;
      width: 180px;
      text-align: center;
      backdrop-filter: blur(4px);
    }
    .profil-card img {
      width: 100px;
      height: 100px;
      object-fit: cover;
      border-radius: 50%;
    }
    .resultats-container {
      display: flex;
      flex-wrap: wrap;
      gap: 20px;
      justify-content: center;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ’– DÃ©couvrir mon profil idÃ©al</h1>
    <form id="questionnaire">
      <div class="question">
        <label>1. ğŸ¶ Tu es plutÃ´tâ€¦
          <br><input type="radio" name="q1" value="chien" required> ğŸ¾ Chien
          <br><input type="radio" name="q1" value="chat"> ğŸ± Chat
        </label>
      </div>
      <div class="question">
        <label>2. ğŸŒŠ Tu prÃ©fÃ¨resâ€¦
          <br><input type="radio" name="q2" value="plage" required> Plage
          <br><input type="radio" name="q2" value="montagne"> Montagne
        </label>
      </div>
      <div class="question">
        <label>3. ğŸŒƒ SoirÃ©e idÃ©ale ?
          <br><input type="radio" name="q3" value="amis" required> Entre amis
          <br><input type="radio" name="q3" value="romantique"> Romantique Ã  deux
        </label>
      </div>
      <div class="question">
        <label>4. ğŸ“± Messages ?
          <br><input type="radio" name="q4" value="papoter" required> Jâ€™adore papoter
          <br><input type="radio" name="q4" value="peu"> 1 ou 2 suffisent
        </label>
      </div>
      <div class="question">
        <label>5. ğŸ¯ En amour tu cherchesâ€¦
          <br><input type="radio" name="q5" value="stable" required> Relation sÃ©rieuse
          <br><input type="radio" name="q5" value="feeling"> Si le feeling passe
        </label>
      </div>
      <div class="question">
        <label>6. ğŸ’¬ Tu prÃ©fÃ¨resâ€¦
          <br><input type="radio" name="q6" value="parler" required> Parler pendant des heures
          <br><input type="radio" name="q6" value="vivre"> Vivre sans trop parler
        </label>
      </div>
      <div class="question">
        <label>7. ğŸ¥ SoirÃ©e parfaite ?
          <br><input type="radio" name="q7" value="netflix" required> Netflix & plaid
          <br><input type="radio" name="q7" value="resto"> Sortie resto / bar
        </label>
      </div>
      <div class="question">
        <label>8. ğŸ’Œ Tu crois auâ€¦
          <br><input type="radio" name="q8" value="foudre" required> Coup de foudre
          <br><input type="radio" name="q8" value="construit"> Lâ€™amour qui se construit
        </label>
      </div>
      <div class="question">
        <label>9. ğŸš€ Tu es plutÃ´tâ€¦
          <br><input type="radio" name="q9" value="spontane" required> SpontanÃ©(e)
          <br><input type="radio" name="q9" value="reflechi"> RÃ©flÃ©chi(e)
        </label>
      </div>
      <div class="question">
        <label>10. ğŸ‘€ Ce qui tâ€™attire en premier :
          <br><input type="radio" name="q10" value="valeurs" required> PersonnalitÃ©/valeurs
          <br><input type="radio" name="q10" value="physique"> Physique / regard
        </label>
      </div>
      <button type="submit">Voir mes profils compatibles ğŸ’</button>
    </form>

    <div id="resultats"></div>
  </div>

  <script>
  document.querySelector("form").addEventListener("submit", async function(e) {
    e.preventDefault();
    const form = e.target;
    const data = new FormData(form);
    const reponsesUser = {};
    data.forEach((value, key) => {
      reponsesUser[key] = value;
    });

    const res = await fetch('profils.json');
    const profils = await res.json();

    const compatibles = profils.filter(profil => {
      let points = 0;
      for (let i = 1; i <= 10; i++) {
        const q = "q" + i;
        if (profil.reponses[q] === reponsesUser[q]) points++;
      }
      return points >= 6;
    });

    const zoneResultats = document.getElementById("resultats");
    if (compatibles.length === 0) {
      zoneResultats.innerHTML = `<p style="text-align:center">Aucun profil compatible ğŸ˜¢</p>`;
      return;
    }

    zoneResultats.innerHTML = `
      <h2>ğŸ’« Profils compatibles :</h2>
      <div class="resultats-container">
        ${compatibles.map(p => `
          <div class="profil-card">
            <img src="${p.photo}" alt="${p.nom}">
            <h3>${p.nom}</h3>
            <p><a href="profil.html?id=${p.id}" style="color:#fff;">Voir le profil</a></p>
          </div>
        `).join('')}
      </div>
    `;
  });
  </script>
</body>
</html>
