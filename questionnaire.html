<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>DÃ©couvrir mon profil idÃ©al</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: 'Segoe UI', sans-serif;
      background-image: url("img/fond-paradis-romantique.jpg");
      background-size: cover;
      background-position: center;
      color: white;
      overflow-x: hidden;
    }

    .container {
      background-color: rgba(0, 0, 0, 0.5);
      margin: 30px auto;
      max-width: 800px;
      padding: 30px;
      border-radius: 20px;
      backdrop-filter: blur(6px);
    }

    h1, h2 {
      text-align: center;
    }

    label {
      display: block;
      margin: 10px 0 5px;
      font-weight: bold;
    }

    .question {
      margin-bottom: 20px;
    }

    input[type="radio"] {
      margin-right: 10px;
    }

    button {
      display: block;
      margin: 30px auto;
      padding: 15px 25px;
      font-size: 18px;
      background-color: #ff69b4;
      border: none;
      border-radius: 10px;
      color: white;
      cursor: pointer;
    }

    .result-card {
      background: rgba(255,255,255,0.15);
      backdrop-filter: blur(6px);
      border-radius: 15px;
      padding: 20px;
      text-align: center;
      margin: 20px auto;
      max-width: 220px;
    }

    .result-card img {
      width: 100px;
      height: 100px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 10px;
    }

    #resultats {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
    }

    @media (max-width: 600px) {
      .container {
        padding: 20px;
      }

      button {
        width: 100%;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>âœ¨ DÃ©couvre ton profil idÃ©al âœ¨</h1>
    <form id="questionnaire">
      <!-- Questions 1 Ã  10 -->
      <div class="question">
        <label>1. ğŸ¶ Tu es plutÃ´tâ€¦</label>
        <input type="radio" name="q1" value="Chien" required /> Chien
        <input type="radio" name="q1" value="Chat" /> Chat
      </div>

      <div class="question">
        <label>2. ğŸŒŠ Tu prÃ©fÃ¨resâ€¦</label>
        <input type="radio" name="q2" value="Plage" required /> Plage
        <input type="radio" name="q2" value="Montagne" /> Montagne
      </div>

      <div class="question">
        <label>3. ğŸŒƒ Ton type de soirÃ©e idÃ©ale ?</label>
        <input type="radio" name="q3" value="Amis" required /> Entre amis
        <input type="radio" name="q3" value="Romantique" /> SoirÃ©e romantique
      </div>

      <div class="question">
        <label>4. ğŸ“± Comment tu vis les messages ?</label>
        <input type="radio" name="q4" value="Papoter" required /> Papoter
        <input type="radio" name="q4" value="Quelques messages" /> Peu de messages
      </div>

      <div class="question">
        <label>5. ğŸ¯ En amour tu cherchesâ€¦</label>
        <input type="radio" name="q5" value="Stable" required /> Relation stable
        <input type="radio" name="q5" value="Feeling" /> Une belle histoire
      </div>

      <div class="question">
        <label>6. ğŸ’¬ Tu prÃ©fÃ¨resâ€¦</label>
        <input type="radio" name="q6" value="Parler" required /> Parler des heures
        <input type="radio" name="q6" value="Moments calmes" /> Moments calmes
      </div>

      <div class="question">
        <label>7. ğŸ¥ SoirÃ©e parfaite ?</label>
        <input type="radio" name="q7" value="Netflix" required /> Netflix & chill
        <input type="radio" name="q7" value="Sortie" /> Resto / bar
      </div>

      <div class="question">
        <label>8. ğŸ’Œ Tu crois auâ€¦</label>
        <input type="radio" name="q8" value="Coup de foudre" required /> Coup de foudre
        <input type="radio" name="q8" value="Amour construit" /> Amour construit
      </div>

      <div class="question">
        <label>9. ğŸš€ Tu es plutÃ´tâ€¦</label>
        <input type="radio" name="q9" value="SpontanÃ©" required /> SpontanÃ©(e)
        <input type="radio" name="q9" value="RÃ©flÃ©chi" /> RÃ©flÃ©chi(e)
      </div>

      <div class="question">
        <label>10. ğŸ‘€ Ce qui tâ€™attire en premier :</label>
        <input type="radio" name="q10" value="Valeurs" required /> Sa personnalitÃ©
        <input type="radio" name="q10" value="Physique" /> Son regard
      </div>

      <button type="submit">ğŸ” Trouver mon profil idÃ©al</button>
    </form>

    <div id="resultats"></div>
  </div>

  <script>
    document.getElementById("questionnaire").addEventListener("submit", async function (e) {
      e.preventDefault();
      const data = new FormData(e.target);
      const userAnswers = {};
      data.forEach((v, k) => userAnswers[k] = v);

      const res = await fetch("profils.json");
      const profils = await res.json();

      const compatibles = profils.filter(p => {
        let score = 0;
        for (let i = 1; i <= 10; i++) {
          if (p.reponses["q" + i] === userAnswers["q" + i]) score++;
        }
        return score >= 6;
      });

      const zone = document.getElementById("resultats");
      if (compatibles.length === 0) {
        zone.innerHTML = `<p style="text-align:center;">ğŸ˜¢ Aucun profil ne correspond Ã  tes rÃ©ponses.</p>`;
        return;
      }

      zone.innerHTML = `<h2>âœ¨ Profils compatibles :</h2>`;
      compatibles.forEach(p => {
        zone.innerHTML += `
          <div class="result-card">
            <img src="${p.photo}" alt="${p.nom}" />
            <h3>${p.nom}</h3>
            <p>${p.ville}, ${p.age} ans</p>
            <p><a href="profil.html?id=${p.id}" style="color:#fff;text-decoration:underline;">Voir le profil</a></p>
          </div>
        `;
      });
    });
  </script>
</body>
</html>
