<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Match - AFFINIX</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@500&display=swap" rel="stylesheet" />
  <style>
    body {
      margin: 0;
      font-family: 'Orbitron', sans-serif;
      background: #111;
      color: white;
      display: flex;
      flex-direction: column;
      height: 100vh;
      overflow: hidden;
      justify-content: center;
      align-items: center;
    }

    h1 {
      margin: 20px 0 0 0;
      font-size: 24px;
      text-align: center;
    }

    #deck {
      position: relative;
      width: 320px;
      max-width: 90vw;
      height: 480px;
      margin: 40px auto 20px auto;
      perspective: 1000px;
    }

    .card {
      position: absolute;
      width: 100%;
      height: 100%;
      border-radius: 15px;
      background: #222;
      box-shadow: 0 10px 25px rgba(0,0,0,0.7);
      border: 3px solid #ff6dfb; /* Couleur n√©on rose par d√©faut */
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      font-size: 20px;
      text-align: center;
      user-select: none;
      touch-action: pan-y;
      transition: box-shadow 0.3s ease;
    }

    .card img {
      max-width: 90%;
      max-height: 60%;
      border-radius: 10px;
      margin-bottom: 15px;
      object-fit: cover;
    }

    .card h2 {
      margin: 0;
      margin-bottom: 10px;
    }

    .card p {
      margin: 0 15px;
      font-size: 16px;
      line-height: 1.3;
    }

    /* Effet sur le dessus */
    .card.top {
      box-shadow: 0 0 20px 6px #ff6dfb;
      cursor: grab;
    }

    /* Boutons en bas */
    .bottom-buttons {
      position: fixed;
      bottom: 20px;
      width: 100%;
      display: flex;
      justify-content: space-between;
      padding: 0 20px;
      box-sizing: border-box;
      max-width: 480px;
      margin: 0 auto;
      left: 0;
      right: 0;
    }

    .btn-chat, .btn-match {
      background: #ff6dfb;
      color: white;
      padding: 14px 20px;
      border-radius: 30px;
      font-weight: bold;
      text-decoration: none;
      box-shadow: 0 0 15px #ffbaff;
      transition: 0.3s ease;
      user-select: none;
      font-family: 'Orbitron', sans-serif;
    }

    .btn-chat:hover, .btn-match:hover {
      background: #e855e0;
      transform: scale(1.1);
    }

    /* Responsive */
    @media (max-width: 400px) {
      #deck {
        height: 400px;
      }

      .card {
        font-size: 18px;
      }
    }
  </style>
</head>
<body>
  <h1>D√©couvre tes matchs</h1>

  <div id="deck">
    <!-- Les cartes seront ins√©r√©es ici dynamiquement -->
  </div>

  <div class="bottom-buttons">
    <a href="chat.html" class="btn-chat">üí¨ Chat</a>
    <a href="match.html" class="btn-match">‚ù§Ô∏è Match</a>
  </div>

  <!-- Hammer.js depuis CDN -->
  <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>
  <script>
    // Exemple simple de cartes √† matcher
    const cardsData = [
      { name: 'Alice', desc: 'Passionn√©e de musique et voyages.', img: 'img/alice.jpg' },
      { name: 'Bob', desc: 'Aime les sports extr√™mes et la nature.', img: 'img/bob.jpg' },
      { name: 'Clara', desc: 'Artiste dans l‚Äô√¢me, adore peindre.', img: 'img/clara.jpg' },
      { name: 'David', desc: 'Geek et fan de jeux vid√©o.', img: 'img/david.jpg' }
    ];

    const deck = document.getElementById('deck');

    // Cr√©e et affiche les cartes
    function createCards() {
      cardsData.forEach((data, index) => {
        const card = document.createElement('div');
        card.classList.add('card');
        if (index === 0) card.classList.add('top');
        card.style.zIndex = cardsData.length - index;
        card.innerHTML = `
          <img src="${data.img}" alt="${data.name}" />
          <h2>${data.name}</h2>
          <p>${data.desc}</p>
        `;
        deck.appendChild(card);
      });
    }

    createCards();

    // Gestion des swipes avec Hammer.js
    const topCard = () => deck.querySelector('.card.top');

    function removeTopCard() {
      const card = topCard();
      if (card) {
        card.remove();
        // Ajouter classe top √† la suivante
        const next = deck.querySelector('.card');
        if (next) next.classList.add('top');
      }
    }

    function initSwipe() {
      let card = topCard();
      if (!card) return;

      const hammertime = new Hammer(card);

      hammertime.on('pan', function(ev) {
        card.style.transition = 'none';
        const x = ev.deltaX;
        const y = ev.deltaY;
        const rotation = x / 20;
        card.style.transform = `translate(${x}px, ${y}px) rotate(${rotation}deg)`;
      });

      hammertime.on('panend', function(ev) {
        card.style.transition = 'transform 0.3s ease';

        const x = ev.deltaX;
        if (Math.abs(x) > 120) {
          // Swipe valid√©
          const direction = x > 0 ? 1 : -1;
          card.style.transform = `translate(${direction * 1000}px, 0) rotate(${direction * 45}deg)`;
          setTimeout(() => {
            removeTopCard();
            initSwipe();
          }, 300);
        } else {
          // Revenir au centre
          card.style.transform = 'translate(0,0) rotate(0)';
        }
      });
    }

    // Initialise la gestion du swipe sur la carte du dessus
    initSwipe();
  </script>
</body>
</html>
